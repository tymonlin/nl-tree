!function(){var e=angular.module("module.newland.tree",[]);e.directive("nlTree",["$NLTree",function(i){return{restrict:"EA",scope:{data:"=",defaultToggled:"=",selectedRow:"@",selected:"&",dataKey:"@",nameKey:"@",fatherNodeCheck:"@",multiSelect:"@"},controller:["$scope",function(o){function c(e,t){e.active=t;var a=e[o.dataKey];if(a)for(var l=0;l<a.length;l++){c(a[l],t)}}o.nameKey||(o.nameKey="name"),o.dataKey||(o.dataKey="data"),o.multiSelect||(o.multiSelect=i.defaultMultiSelect),o.fatherNodeCheck||(o.fatherNodeCheck=!1),o.select=function(e){e.active?o.multiSelect?c(e,!1):(e.active=!1,o.selected({row:void 0}),o.selectedRow=void 0):(o.selectedRow&&(o.selectedRow.active=!1),o.multiSelect?c(e,!0):(e.active=!0,o.selected({row:e}),o.selectedRow=e))},o.changeToggled=function(e){e.toggled=!e.toggled};var t=o.defaultToggled;o.initRowTOG=function(e){e.toggled=null==e.toggled?null==t?i.defaultToggled:t:e.toggled}}],template:"<div></div>",replace:!0,compile:function(e,t){for(var a=$(e),l=0;l<i.maxDepth;l++){var o=$("<ul ng-if='"+(0==l||"row"+(l-1)+"[dataKey]")+"'>   <li ng-repeat='row"+l+" in "+(0==l?"data":"row"+(l-1)+"[dataKey]")+"'        ng-class=\"{'active':(row"+l+".active), 'toggled': row"+l+".toggled}\"        ng-init='initRowTOG(row"+l+")'>       <i class='fa' ng-class=\"{'fa-plus-square-o': (row"+l+"[dataKey] && !row"+l+".toggled), 'fa-minus-square-o': (!row"+l+"[dataKey] || row"+l+".toggled)}\" ng-click='changeToggled(row"+l+")'></i>       <i class='fa' ng-show='multiSelect && (fatherNodeCheck || (!fatherNodeCheck && !row"+l+"[dataKey]))'           ng-class=\"{true: 'fa-square-o', false: 'fa-check-square-o'}[row"+l+".active != true]\"           ng-click='select(row"+l+")' ng-dblclick='changeToggled(row"+l+")'></i>       <a href='javascript:;' ng-click='select(row"+l+")' ng-dblclick='changeToggled(row"+l+")'><span>{{row"+l+"[nameKey]}}</span></a>   </li></ul>");a.append(o),a=o.children("li")}}}}]),e.provider("$NLTree",function e(){this.maxDepth=10,this.defaultToggled=!1,this.defaultMultiSelect=!1,this.getCheckedList=function(e,t,a){t=t||"data";for(var l=[],o=0;o<e.length;o++){var c=e[o],i=[];c[t]&&(i=this.getCheckedList(c[t],t,a)),(!a&&!c[t]&&c.active||a&&c.active)&&l.push(c),l=l.concat(i)}return l},this.sortDataList=function(e,t,a,l){for(var o=[],c=0;c<e.length;c++){var i,r=e[c];r[l]==t&&(0<(i=this.sortDataList(e,r[a],a,l)).length&&(r.data=i),o.push(r))}return o},this.$get=function(){return new e}})}();
!function(){var e=angular.module("module.newland.tree",[]);e.directive("nlTree",["$NLTree","$injector",function(n,e){return{restrict:"EA",scope:{data:"=",defaultToggled:"=",selectedRow:"@",selected:"&",dataKey:"@",nameKey:"@",multiSelect:"@",translateKey:"@"},controller:["$scope",function(l){l.nameKey||(l.nameKey="name"),l.dataKey||(l.dataKey="data"),l.multiSelect||(l.multiSelect=n.defaultMultiSelect),l.fatherNodeCheck||(l.fatherNodeCheck=!1),l.translateKey&&e.has("$translate"),l.select=function(e){e.active?(e.active=!1,l.selected({row:void 0}),l.selectedRow=void 0):(l.selectedRow&&(l.selectedRow.active=!1),e.active=!0,l.selected({row:e}),l.selectedRow=e)},l.check=function(e){e.checked=e.checked?0:2,function e(t,a){t.checked=a;var c=t[l.dataKey];if(c)for(var r=0;r<c.length;r++){var n=c[r];e(n,a)}}(e,e.checked),n.recursiveState(l.data,l.dataKey)},l.changeToggled=function(e){e.toggled=!e.toggled};var t=l.defaultToggled;l.initRowTOG=function(e){e.toggled=null==e.toggled?null==t?n.defaultToggled:t:e.toggled}}],template:"<div></div>",replace:!0,compile:function(e,t){for(var a=$(e),c=0;c<n.maxDepth;c++){var r=$("<ul ng-if='"+(0==c||"row"+(c-1)+"[dataKey]")+"'>   <li ng-repeat='row"+c+" in "+(0==c?"data":"row"+(c-1)+"[dataKey]")+"'        ng-class=\"{'active':(row"+c+".active), 'toggled': row"+c+".toggled}\"        ng-init='initRowTOG(row"+c+")'>       <i class='fa' ng-class=\"{'fa-plus-square-o': (row"+c+"[dataKey] && !row"+c+".toggled), 'fa-minus-square-o': (!row"+c+"[dataKey] || row"+c+".toggled)}\" ng-click='changeToggled(row"+c+")'></i>       <i class='fa' ng-show='multiSelect' ng-class=\"{'fa-square-o': !row"+c+".checked, 'fa-check-square-o': row"+c+".checked==2, 'fa-check-square': row"+c+".checked==1}\" ng-click='check(row"+c+")'></i>       <a href='javascript:;' ng-click='select(row"+c+")' ng-dblclick='changeToggled(row"+c+")'><span>{{translateKey ? (row"+c+"[translateKey] | nlTreeTranslate) : row"+c+"[nameKey]}}</span></a>   </li></ul>");a.append(r),a=r.children("li")}}}}]),e.filter("nlTreeTranslate",["$NLTree","$injector",function(e,t){function a(e){return c?c.instant(e):e}var c=t.has("$translate")?t.get("$translate"):void 0;return a.$stateful=!0,a}]),e.provider("$NLTree",function e(){this.maxDepth=10,this.defaultToggled=!1,this.defaultMultiSelect=!1,this.getCheckedList=function(e,t,a){t=t||"data";for(var c=[],r=0;r<e.length;r++){var n=e[r],l=[];n[t]&&(l=this.getCheckedList(n[t],t,a)),(!a&&!n[t]&&n.active||a&&n.active)&&c.push(n),c=c.concat(l)}return c},this.recursiveState=function(e,t){for(var a=0,c=0;c<e.length;c++){var r=e[c],n=r.checked;r[t]&&(n=this.recursiveState(r[t],t),r.checked=n),0==a&&0==c?a=n||0:(0==a&&2==n&&0<c||2==a&&!n||1==n)&&(a=1)}return a},this.sortDataList=function(e,t,a,c){for(var r=[],n=0;n<e.length;n++){var l,o=e[n];o[c]==t&&(0<(l=this.sortDataList(e,o[a],a,c)).length&&(o.data=l),r.push(o))}return r},this.$get=function(){return new e}})}();